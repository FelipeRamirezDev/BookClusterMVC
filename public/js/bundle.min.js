const apiURL="http://127.0.0.1:5000",fetchRecommendedBooks=async e=>{try{const t=await fetch(`${apiURL}/recommend?book_name=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return{success:!1,message:"No se encontraron recomendaciones"};const o=(await t.json()).recommendations||[];return 0===o.length?{success:!1,message:`No se encontraron recomendaciones para: ${e}`}:(renderRecommendedBooks(o),{success:!0})}catch(e){return console.error("Error al obtener recomendaciones:",e),{success:!1,message:"Ocurrió un error al obtener recomendaciones."}}},showBookModal=e=>{const t=document.getElementById("book-modal");t.querySelector("#modal-image").src=e.image_url,t.querySelector("#modal-title").textContent=e.title,t.querySelector("#modal-isbn").textContent=`ISBN: ${e.ISBN}`,t.querySelector("#modal-author").textContent=`Autor: ${e.author}`,t.querySelector("#modal-publisher").textContent=`Editorial: ${e.publisher}`,t.querySelector("#modal-year").textContent=`Año: ${e.year}`,t.style.display="block";t.querySelector(".close-button").addEventListener("click",(()=>{t.style.display="none"})),window.addEventListener("click",(e=>{e.target===t&&(t.style.display="none")}))},renderRecommendedBooks=e=>{const t=document.querySelector(".recommended-books__grid");t.innerHTML="",e.forEach((e=>{const o=document.createElement("div");o.classList.add("book-card"),o.innerHTML=`\n            <h3>${e.title}</h3>\n            <img src='${e.image_url}' alt='${e.title}'>\n            <p>${e.author}</p>\n        `,o.addEventListener("click",(()=>showBookModal(e))),t.appendChild(o)}))},getRecommendations=()=>{const e=document.querySelector(".search"),t=e.querySelector(".input-books"),o=e.querySelector(".suggestions-list"),n=e.querySelector(".btn-cleare");if(!t||!o||!n)return void console.error("No se encontraron los elementos necesarios");t.addEventListener("input",(async()=>{const e=t.value;if(e.length<2)o.innerHTML="";else try{const n=await fetch(`${apiURL}/search?query=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=(await n.json()).results;o.innerHTML="",r.forEach((e=>{const n=document.createElement("li");n.textContent=e.title,n.classList.add("suggestion-item"),n.addEventListener("click",(()=>{t.value=e.title,o.innerHTML=""})),o.appendChild(n)}))}catch(e){console.error("Error al obtener sugerencias:",e)}})),n.addEventListener("click",(()=>{t.value="",o.innerHTML=""}));const r=document.querySelector(".recommended-books__title"),c=document.querySelector(".recommended-books__grid");document.querySelector(".btn-search").addEventListener("click",(async()=>{const e=t.value.trim();if(e){const t=await fetchRecommendedBooks(e);t.success?r.textContent=`Libros recomendados para: ${e}`:(r.textContent=`${t.message} para ${e}`,c.innerHTML="")}}))};getRecommendations();
//# sourceMappingURL=bundle.min.js.map
